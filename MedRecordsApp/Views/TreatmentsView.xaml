<UserControl x:Class="MedRecordsApp.Views.TreatmentsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="900">
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="*"/>
      <RowDefinition Height="2*"/>
    </Grid.RowDefinitions>

    <!-- Operations TabControl -->
    <TabControl Grid.Row="0" Margin="10">
      <!-- Add Tab -->
      <TabItem Header="Add">
        <Grid Margin="20">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
          </Grid.ColumnDefinitions>

          <!-- Row 1 -->
          <StackPanel Grid.Row="0" Grid.Column="0" Margin="5">
            <TextBlock Text="Patient:" HorizontalAlignment="Left" Margin="0,0,0,5"/>
            <ComboBox x:Name="AddPatientComboBox" Padding="5"
                                  DisplayMemberPath="PatientID" SelectedValuePath="PatientID"/>
          </StackPanel>

          <StackPanel Grid.Row="0" Grid.Column="1" Margin="5">
            <TextBlock Text="Start Date:" HorizontalAlignment="Left" Margin="0,0,0,5"/>
            <DatePicker x:Name="AddStartDatePicker" Padding="5"/>
          </StackPanel>

          <!-- Row 2 -->
          <StackPanel Grid.Row="1" Grid.Column="0" Margin="5">
            <TextBlock Text="Status:" HorizontalAlignment="Left" Margin="0,0,0,5"/>
            <ComboBox x:Name="AddStatusComboBox" Padding="5" SelectedIndex="0">
              <ComboBoxItem Content="Active"/>
              <ComboBoxItem Content="Completed"/>
              <ComboBoxItem Content="Cancelled"/>
            </ComboBox>
          </StackPanel>

          <!-- Row 3 -->
          <StackPanel Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Margin="5">
            <TextBlock Text="Description:" HorizontalAlignment="Left" Margin="0,0,0,5"/>
            <TextBox x:Name="AddDescriptionTextBox" Padding="5" 
                                 TextWrapping="Wrap" AcceptsReturn="True" Height="80"/>
          </StackPanel>

          <Button x:Name="AddSaveButton" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" 
                            Content="Save" Width="120" Height="35" 
                            HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,20,0,0"
                            Click="AddSaveButton_Click"/>
        </Grid>
      </TabItem>

      <!-- Update Tab -->
      <TabItem Header="Update">
        <Grid Margin="20">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
          </Grid.ColumnDefinitions>

          <!-- Row 1 -->
          <StackPanel Grid.Row="0" Grid.Column="0" Margin="5">
            <TextBlock Text="Treatment ID:" HorizontalAlignment="Left" Margin="0,0,0,5"/>
            <ComboBox x:Name="UpdateTreatmentIDComboBox" Padding="5"
                                  DisplayMemberPath="TreatmentID" SelectedValuePath="TreatmentID"/>
          </StackPanel>

          <StackPanel Grid.Row="0" Grid.Column="1" Margin="5">
            <TextBlock Text="Patient:" HorizontalAlignment="Left" Margin="0,0,0,5"/>
            <ComboBox x:Name="UpdatePatientComboBox" Padding="5"
                                  DisplayMemberPath="PatientID" SelectedValuePath="PatientID"/>
          </StackPanel>

          <!-- Row 2 -->
          <StackPanel Grid.Row="1" Grid.Column="0" Margin="5">
            <TextBlock Text="Start Date:" HorizontalAlignment="Left" Margin="0,0,0,5"/>
            <DatePicker x:Name="UpdateStartDatePicker" Padding="5"/>
          </StackPanel>

          <StackPanel Grid.Row="1" Grid.Column="1" Margin="5">
            <TextBlock Text="Status:" HorizontalAlignment="Left" Margin="0,0,0,5"/>
            <ComboBox x:Name="UpdateStatusComboBox" Padding="5">
              <ComboBoxItem Content="Active"/>
              <ComboBoxItem Content="Completed"/>
              <ComboBoxItem Content="Cancelled"/>
            </ComboBox>
          </StackPanel>

          <!-- Row 3 -->
          <StackPanel Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Margin="5">
            <TextBlock Text="Description:" HorizontalAlignment="Left" Margin="0,0,0,5"/>
            <TextBox x:Name="UpdateDescriptionTextBox" Padding="5" 
                                 TextWrapping="Wrap" AcceptsReturn="True" Height="80"/>
          </StackPanel>

          <Button x:Name="UpdateSaveButton" Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2" 
                            Content="Update" Width="120" Height="35" 
                            HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,20,0,0"
                            Click="UpdateSaveButton_Click"/>
        </Grid>
      </TabItem>

      <!-- Delete Tab -->
      <TabItem Header="Delete">
        <Grid Margin="20">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
          </Grid.ColumnDefinitions>

          <StackPanel Grid.Row="0" Grid.Column="0" Margin="5">
            <TextBlock Text="Treatment ID:" HorizontalAlignment="Left" Margin="0,0,0,5"/>
            <ComboBox x:Name="DeleteTreatmentIDComboBox" Padding="5"
                                  DisplayMemberPath="TreatmentID" SelectedValuePath="TreatmentID"/>
          </StackPanel>

          <Button x:Name="DeleteButton" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" 
                            Content="Delete" Width="120" Height="35" 
                            HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,20,0,0"
                            Click="DeleteButton_Click"/>
        </Grid>
      </TabItem>

      <!-- Manage Doctors Tab -->
      <TabItem Header="Manage Doctors">
        <Frame x:Name="TreatmentDoctorsFrame" NavigationUIVisibility="Hidden"/>
      </TabItem>
    </TabControl>

    <!-- DataGrid -->
    <DataGrid x:Name="TreatmentsDataGrid" Grid.Row="1" Margin="10"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  CanUserAddRows="False"
                  SelectionMode="Single"
                  AlternatingRowBackground="#F9F9F9"
                  GridLinesVisibility="Horizontal"
                  HeadersVisibility="Column"
                  SelectionChanged="TreatmentsDataGrid_SelectionChanged">
      <DataGrid.Columns>
        <DataGridTextColumn Header="ID" Binding="{Binding TreatmentID}" Width="50"/>
        <DataGridTextColumn Header="Patient" Binding="{Binding PatientName}" Width="150"/>
        <DataGridTextColumn Header="Description" Binding="{Binding TreatmentDescription}" Width="*"/>

        <DataGridTextColumn Header="Start Date" 
                            Binding="{Binding StartDate, StringFormat={}{0:yyyy-MM-dd}}" 
                            Width="100"/>

        <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100"/>
        <DataGridTextColumn Header="Assigned Doctors" Binding="{Binding DoctorsList}" Width="*"/>
      </DataGrid.Columns>
    </DataGrid>
  </Grid>
</UserControl>